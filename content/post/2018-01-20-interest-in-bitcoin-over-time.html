---
title: Interest in Bitcoin over Time
author: Knut Behrends
date: '2018-01-20'
draft: true
slug: bitcoin-interest
categories: ['personal-blog']
tags: ['code', 'finance', 'time-series']
banner: img/post/thumb/jq-med.png
output:
  html_document:
    toc: false
---



<div class="alert alert-info"><b>Abstract:</b>
Bitcoin. Visualizing (1) Wikipedia Pageviews, (2) Google Searches and (3) Exchange Rates from 2015 to early 2018. 
Simple timeseries plots show that these three are strongly correlated.
</div>
<p>In this post I’ll analyse global interest in Bitcoin and Ethereum over time, according to accesses to Wikipedia articles and as Google Searches.</p>
<p>The end of the year 2017 saw the “Bitcoin Bubble”, a period of one month where 1 Bitcoin was traded for up to $20000 on most exchanges. I am not invested in Bitcoin, and never was substantially, but this cryptocurrencies and the blockchain technology still interest me.</p>
<div id="preprocessing" class="section level3">
<h3>Preprocessing</h3>
<p>Preprocessing entails:</p>
<ul>
<li>Define necessary R packages</li>
<li>Fetching the data</li>
</ul>
<div id="load-r-packages" class="section level4">
<h4>Load R packages</h4>
<pre class="r"><code>library(pageviews) # access Wikipedia
library(Quandl)    # provider of financial data
library(lubridate)
library(tidyverse) 
library(gtrendsR)  # access Google trends API
theme_set(theme_bw()) # ggplot default</code></pre>
</div>
<div id="define-a-wrapper-function-to-access-a-wikipedia-api" class="section level4">
<h4>Define a wrapper function to access a Wikipedia API</h4>
<p>The function contains quite a few of hardwired parameters. The <code>pageviews</code> package fetches the data. At this time, no API keys and authentication are necessary. The function could bemade a lot more flexible by adding more parameters but that is also not necessary for this blogpost.</p>
<p>The search function only works for terms that for which an article in both wikipedias exists.</p>
<p>Luckily “Bitcoin” is such a term.</p>
<pre class="r"><code># Get the pageviews for &quot;Search term&quot;
# pageview data is available since 2015
startdate &lt;- ymd(&quot;20150101&quot;)
enddate &lt;- now()

wikipedia_de_vs_en &lt;- function(term = &quot;Bitcoin&quot;) {
  # call English wikipedia        
  pageviews &lt;- article_pageviews(
    project = &quot;en.wikipedia&quot;,
    article = term,
    user_type = &quot;user&quot;,
    start = startdate,
    end = enddate
  )
  # call German wikipedia
  pageviews2 &lt;- article_pageviews(
    project = &quot;de.wikipedia&quot;,
    article = term,
    user_type = &quot;user&quot;,
    start = startdate,
    end = enddate
  )

  # combine to data frame
  pageviews.df &lt;- bind_rows(pageviews, pageviews2) %&gt;%
    mutate(language = case_when(
      language == &quot;en&quot; ~ &quot;English Wikipedia&quot;,
      language == &quot;de&quot; ~ &quot;German Wikipedia&quot;
    ))

  #plot it with 2 panels
  ggplot(pageviews.df, aes(date, views, color = language)) +
    geom_line() +
    xlab(&quot;&quot;) + ylab(&quot;Views per Day&quot;) +
    theme(legend.position = &quot;none&quot;) +
    facet_wrap(~ language, nrow = 2, scales = &quot;free_y&quot;) +
    ggtitle(
      sprintf(&quot;Daily Pageviews of &#39;%s&#39; in the English and German Wikipedias&quot;, term),
      subtitle = &quot;Human Users only&quot;
    ) 
}</code></pre>
<p>Get some data for Bitcoin</p>
<p><img src="/post/2018-01-20-interest-in-bitcoin-over-time_files/figure-html/btc-1.png" width="864" /></p>
<p>Get some data for Ethereum, another popular cryptocurrency (at this time).</p>
<p><img src="/post/2018-01-20-interest-in-bitcoin-over-time_files/figure-html/eth-1.png" width="864" /></p>
<p>There is another, alternative data source: Google Trends API, here accessed with functions from the <a href="https://github.com/PMassicotte/gtrendsR">gtrendsR</a> package. The API provides aggregated and rescaled data on how many people have performed Google searches for this term.</p>
<p>Show a plot for comparison:</p>
<pre class="r"><code>bitcoin_trends$interest_over_time %&gt;%
  filter(date &gt; as.Date(&quot;2015-01-01&quot;)) %&gt;%
  ggplot(aes(date, hits)) +
  geom_line() +
  theme(legend.position = &quot;none&quot;) +
  xlab(&quot;&quot;) + ylab(&quot;Interest&quot;) +
  ggtitle(
    sprintf(&quot;Google Trends: Worlwide Interest over Time in &#39;%s&#39;&quot;, &quot;Bitcoin&quot;),
    subtitle = &quot;(Google internal counters)&quot;
  )</code></pre>
<p><img src="/post/2018-01-20-interest-in-bitcoin-over-time_files/figure-html/gogl-1.png" width="864" /></p>
</div>
<div id="another-obligatory-comparison" class="section level4">
<h4>Another obligatory comparison</h4>
<p>Last but not least: the exchange rate for Bitcoin, here given in Euro.</p>
<pre class="r"><code>btc &lt;- Quandl(code = &quot;BCHARTS/BTCDEEUR&quot;, type = &quot;xts&quot;)
autoplot(btc$Close[&quot;2015-01-01/&quot;]) +
        ylab(&quot;Bitcoin/EUR&quot;) + xlab(&quot;Year&quot;) +
        ggtitle(&quot;Bitcoin Exchange Rate 2015-2018&quot;,
                subtitle=&quot;in EUR, according to the Kraken.com trading platform&quot;)</code></pre>
<p><img src="/post/2018-01-20-interest-in-bitcoin-over-time_files/figure-html/quandl-1.png" width="864" /></p>
</div>
</div>
